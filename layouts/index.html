{{ define "head" }}
{{ end }}

{{ define "main" }}
<main>
  {{ with .Site.Params.home_banner }}
    {{ with resources.Get . }}
      <section class="hero" style="background-image: url('{{ .RelPermalink }}');">
      </section>
    {{ else }}
      <p style="color: red;">hugo.{toml/yaml}-params-home_banner not found in "assets/{{ . }}"</p>
    {{ end }}
  {{ end }}
  <div id="content" class="index">
    {{ with .Site.GetPage "_index.md" }}
      {{ .Content }}
    {{ end }}


    {{ $nNews := .Site.Params.front_news | default 5 }}
    <h2 style="margin-top: 1cm">Latest News</h2>
    {{ $allowedTypes := slice "news" "publications" }}
    {{ range ( where site.RegularPages "Type" "in" $allowedTypes | first $nNews ) }}
      <div class="row align-items-start">
        <div class="col-sm-3">
          <h4><time style="margin-left: 0rem">{{ .PublishDate.Format .Site.Params.dateFormat }}</time></h4>
        </div>
        <div class="col">
          <h3><a href="{{ .Permalink }}"> {{ .Title }}</a></h3>
          {{ if eq .Type "publications" }}
            <p>
            {{ if .Params.journal }}
              {{ if .Params.doi }}
                <a class="link" href="{{ .Params.doi }}" target="_blank">{{ .Params.journal }}</a>
              {{ else }}
                {{ .Params.journal }}
              {{ end }}
              [ <a class="link" href="https://arxiv.org/abs/{{ .Params.arXiv }}" target="_blank">arXiv:{{ .Params.arXiv }}</a> ]
            {{ else }}
              <a class="link" href="https://arxiv.org/abs/{{ .Params.arXiv }}" target="_blank">arXiv:{{ .Params.arXiv }}</a>
            {{ end }}
            {{ if .Params.comment }}
              <span class="card__footer_highlight"> | {{ .Params.comment }}</span>
            {{ end }}
            </p>
          {{ end }}
        </div>
      </div>
    {{ end }}
    </div>

</main>
{{ end }}
